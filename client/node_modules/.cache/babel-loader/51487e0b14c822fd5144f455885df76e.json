{"ast":null,"code":"var _jsxFileName = \"/Users/ashianagi/Desktop/TechWorks/findyourjob/client/src/searchbar.js\";\nimport React from 'react';\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\n\nclass Search extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onChangedEvent = e => {\n      let value = e.target.value; //capture the char as user types\n\n      value = value.toLowerCase();\n      let matches = [];\n      let results = []; //matching input value to stored data\n\n      if (value.length > 0) {\n        const regex = new RegExp(\"^\".concat(value));\n        matches = this.state.data.sort().filter(val => regex.test(val));\n      }\n\n      for (let i = 0; matches.length; i++) {\n        this.state.data.filter(function (skill) {\n          if (skill.skill_name === matches[i]) {\n            results.push(skill.skill_id);\n            return;\n          }\n        });\n      } //storing matched skills to matches and updating the state. \n\n\n      this.setState(() => ({\n        results: results\n      }));\n    };\n\n    this.handleEnterKey = e => {\n      const matches = this.state.matches;\n\n      if (e.key === 'Enter' && matches.length > 0) {\n        console.log(matches);\n      } else if (e.key === 'Enter' && matches.length === 0) {\n        this.setState({\n          errorMessage: \"error\"\n        });\n      } else if (e.key === 'Backspace') {\n        this.setState({\n          errorMessage: \"\"\n        });\n      }\n    };\n\n    this.state = {\n      data: [],\n      skills: [],\n      result: [],\n      errorMessage: ''\n    };\n  } // fetching skills from database and updating it to data in state. \n\n\n  async componentDidMount() {\n    try {\n      const res = await axios.get(\"/api/skills\");\n      let skillsArray = res.data.map(skill => skill.skill_name);\n      this.setState({\n        data: skillsArray,\n        skills: res.data\n      });\n      console.log(this.state.numbers);\n      console.log(res.data);\n    } catch (error) {\n      console.log(error);\n    }\n  } //matching input skill to skills stored in data\n\n\n  //outputs results of matched skills to user. \n  outputResults() {\n    const matches = this.state.matches;\n\n    if (matches.length === 0) {\n      return null;\n    }\n\n    return React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, matches.map(item => React.createElement(\"li\", {\n      key: item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, item)));\n  } //handling errors \n\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      onChange: this.onChangedEvent,\n      onKeyDown: e => this.handleEnterKey(e),\n      type: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }), this.outputResults(), this.state.errorMessage, React.createElement(Link, {\n      to: \"/results/\".concat(this.state.matches),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"Button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"Search\")));\n  }\n\n}\n\nexport default Search;","map":{"version":3,"sources":["/Users/ashianagi/Desktop/TechWorks/findyourjob/client/src/searchbar.js"],"names":["React","axios","Link","Search","Component","constructor","props","onChangedEvent","e","value","target","toLowerCase","matches","results","length","regex","RegExp","state","data","sort","filter","val","test","i","skill","skill_name","push","skill_id","setState","handleEnterKey","key","console","log","errorMessage","skills","result","componentDidMount","res","get","skillsArray","map","numbers","error","outputResults","item","render"],"mappings":"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","sourcesContent":["import React from 'react'; \nimport axios from \"axios\"; \nimport {Link} from \"react-router-dom\"; \n\nclass Search extends React.Component {\n    constructor(props) {\n        super(props); \n        this.state = {\n            data: [], \n            skills: [],\n            result: [],\n            errorMessage: '',\n        } \n    }\n\n     // fetching skills from database and updating it to data in state. \n    async componentDidMount() {\n        try {\n            const res = await axios.get(\"/api/skills\")\n            let skillsArray = res.data.map(skill => skill.skill_name) \n            this.setState({\n                data: skillsArray,\n                skills: res.data\n            })\n            console.log(this.state.numbers)\n            console.log(res.data);\n        } catch(error){\n            console.log(error)\n        }\n\n    }\n\n    //matching input skill to skills stored in data\n    onChangedEvent = (e) => {\n        let value = e.target.value; //capture the char as user types\n        value = value.toLowerCase(); \n        let matches  = []; \n        let results= []; \n        //matching input value to stored data\n        if (value.length > 0) {\n            const regex = new RegExp(`^${value}`); \n            matches = this.state.data.sort().filter(val => regex.test(val))\n        }\n        for(let i=0; matches.length; i++) {\n            this.state.data.filter(function(skill) {\n                if(skill.skill_name === matches[i]) {\n                    results.push(skill.skill_id); \n                    return; \n                }\n            })\n        }\n        //storing matched skills to matches and updating the state. \n       this.setState(()=> ({\n           results: results\n        }));\n    }\n  \n    //outputs results of matched skills to user. \n    outputResults () {\n        const { matches } = this.state; \n        if (matches.length ===  0 ) {\n            return null; \n        } \n        return (\n            <ul> \n                {matches.map((item) => <li key={item}>{item}</li>)}\n            </ul>\n        )\n    }\n\n    //handling errors \n    handleEnterKey = (e) => {\n        const { matches } = this.state;\n        if(e.key === 'Enter' && matches.length > 0) {\n\n            console.log(matches)\n        } else if(e.key === 'Enter' && matches.length === 0) {\n            this.setState({\n                errorMessage: \"error\"\n            })\n         } else if(e.key === 'Backspace') {\n            this.setState({\n                errorMessage: \"\"\n            })\n        }\n    }\n\n    render () {\n        return (\n            <div>  \n                <input onChange={this.onChangedEvent} onKeyDown={(e) => this.handleEnterKey(e)} type=\"text\"/> \n                {this.outputResults()}\n                {this.state.errorMessage} \n                <Link to={`/results/${this.state.matches}`}>\n                    <button type=\"Button\">\n                        Search \n                    </button>\n                </Link>\n            </div>\n        )\n    }\n}\n\nexport default Search; "]},"metadata":{},"sourceType":"module"}